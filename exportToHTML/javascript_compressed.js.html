<html>
<head>
<title>javascript_compressed.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #cc7832;}
.s4 { color: #6897bb;}
.s5 { color: #4646f1;}
.s6 { color: #6a8759;}
.ln { color: #606366; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
javascript_compressed.js</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">// Do not edit this file; automatically generated by build.py.</span>
<a name="l2"><span class="ln">2    </span></a><span class="s2">'use strict'</span><span class="s1">;</span>
<a name="l3"><span class="ln">3    </span></a>
<a name="l4"><span class="ln">4    </span></a>
<a name="l5"><span class="ln">5    </span></a><span class="s1">Blockly.JavaScript=</span><span class="s3">new </span><span class="s1">Blockly.Generator(</span><span class="s2">&quot;JavaScript&quot;</span><span class="s1">);Blockly.JavaScript.addReservedWords(</span><span class="s2">&quot;Blockly,break,case,catch,continue,debugger,default,delete,do,else,finally,for,function,if,in,instanceof,new,return,switch,this,throw,try,typeof,var,void,while,with,class,enum,export,extends,import,super,implements,interface,let,package,private,protected,public,static,yield,const,null,true,false,Array,ArrayBuffer,Boolean,Date,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Error,eval,EvalError,Float32Array,Float64Array,Function,Infinity,Int16Array,Int32Array,Int8Array,isFinite,isNaN,Iterator,JSON,Math,NaN,Number,Object,parseFloat,parseInt,RangeError,ReferenceError,RegExp,StopIteration,String,SyntaxError,TypeError,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray,undefined,uneval,URIError,applicationCache,closed,Components,content,_content,controllers,crypto,defaultStatus,dialogArguments,directories,document,frameElement,frames,fullScreen,globalStorage,history,innerHeight,innerWidth,length,location,locationbar,localStorage,menubar,messageManager,mozAnimationStartTime,mozInnerScreenX,mozInnerScreenY,mozPaintCount,name,navigator,opener,outerHeight,outerWidth,pageXOffset,pageYOffset,parent,performance,personalbar,pkcs11,returnValue,screen,screenX,screenY,scrollbars,scrollMaxX,scrollMaxY,scrollX,scrollY,self,sessionStorage,sidebar,status,statusbar,toolbar,top,URL,window,addEventListener,alert,atob,back,blur,btoa,captureEvents,clearImmediate,clearInterval,clearTimeout,close,confirm,disableExternalCapture,dispatchEvent,dump,enableExternalCapture,escape,find,focus,forward,GeckoActiveXObject,getAttention,getAttentionWithCycleCount,getComputedStyle,getSelection,home,matchMedia,maximize,minimize,moveBy,moveTo,mozRequestAnimationFrame,open,openDialog,postMessage,print,prompt,QueryInterface,releaseEvents,removeEventListener,resizeBy,resizeTo,restore,routeEvent,scroll,scrollBy,scrollByLines,scrollByPages,scrollTo,setCursor,setImmediate,setInterval,setResizable,setTimeout,showModalDialog,sizeToContent,stop,unescape,updateCommands,XPCNativeWrapper,XPCSafeJSObjectWrapper,onabort,onbeforeunload,onblur,onchange,onclick,onclose,oncontextmenu,ondevicemotion,ondeviceorientation,ondragdrop,onerror,onfocus,onhashchange,onkeydown,onkeypress,onkeyup,onload,onmousedown,onmousemove,onmouseout,onmouseover,onmouseup,onmozbeforepaint,onpaint,onpopstate,onreset,onresize,onscroll,onselect,onsubmit,onunload,onpageshow,onpagehide,Image,Option,Worker,Event,Range,File,FileReader,Blob,BlobBuilder,Attr,CDATASection,CharacterData,Comment,console,DocumentFragment,DocumentType,DomConfiguration,DOMError,DOMErrorHandler,DOMException,DOMImplementation,DOMImplementationList,DOMImplementationRegistry,DOMImplementationSource,DOMLocator,DOMObject,DOMString,DOMStringList,DOMTimeStamp,DOMUserData,Entity,EntityReference,MediaQueryList,MediaQueryListListener,NameList,NamedNodeMap,Node,NodeFilter,NodeIterator,NodeList,Notation,Plugin,PluginArray,ProcessingInstruction,SharedWorker,Text,TimeRanges,Treewalker,TypeInfo,UserDataHandler,Worker,WorkerGlobalScope,HTMLDocument,HTMLElement,HTMLAnchorElement,HTMLAppletElement,HTMLAudioElement,HTMLAreaElement,HTMLBaseElement,HTMLBaseFontElement,HTMLBodyElement,HTMLBRElement,HTMLButtonElement,HTMLCanvasElement,HTMLDirectoryElement,HTMLDivElement,HTMLDListElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFontElement,HTMLFormElement,HTMLFrameElement,HTMLFrameSetElement,HTMLHeadElement,HTMLHeadingElement,HTMLHtmlElement,HTMLHRElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLKeygenElement,HTMLLabelElement,HTMLLIElement,HTMLLinkElement,HTMLMapElement,HTMLMenuElement,HTMLMetaElement,HTMLModElement,HTMLObjectElement,HTMLOListElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOutputElement,HTMLParagraphElement,HTMLParamElement,HTMLPreElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableDataCellElement,HTMLTableHeaderCellElement,HTMLTableColElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTextAreaElement,HTMLTimeElement,HTMLTitleElement,HTMLTrackElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement,HTMLCanvasElement,CanvasRenderingContext2D,CanvasGradient,CanvasPattern,TextMetrics,ImageData,CanvasPixelArray,HTMLAudioElement,HTMLVideoElement,NotifyAudioAvailableEvent,HTMLCollection,HTMLAllCollection,HTMLFormControlsCollection,HTMLOptionsCollection,HTMLPropertiesCollection,DOMTokenList,DOMSettableTokenList,DOMStringMap,RadioNodeList,SVGDocument,SVGElement,SVGAElement,SVGAltGlyphElement,SVGAltGlyphDefElement,SVGAltGlyphItemElement,SVGAnimationElement,SVGAnimateElement,SVGAnimateColorElement,SVGAnimateMotionElement,SVGAnimateTransformElement,SVGSetElement,SVGCircleElement,SVGClipPathElement,SVGColorProfileElement,SVGCursorElement,SVGDefsElement,SVGDescElement,SVGEllipseElement,SVGFilterElement,SVGFilterPrimitiveStandardAttributes,SVGFEBlendElement,SVGFEColorMatrixElement,SVGFEComponentTransferElement,SVGFECompositeElement,SVGFEConvolveMatrixElement,SVGFEDiffuseLightingElement,SVGFEDisplacementMapElement,SVGFEDistantLightElement,SVGFEFloodElement,SVGFEGaussianBlurElement,SVGFEImageElement,SVGFEMergeElement,SVGFEMergeNodeElement,SVGFEMorphologyElement,SVGFEOffsetElement,SVGFEPointLightElement,SVGFESpecularLightingElement,SVGFESpotLightElement,SVGFETileElement,SVGFETurbulenceElement,SVGComponentTransferFunctionElement,SVGFEFuncRElement,SVGFEFuncGElement,SVGFEFuncBElement,SVGFEFuncAElement,SVGFontElement,SVGFontFaceElement,SVGFontFaceFormatElement,SVGFontFaceNameElement,SVGFontFaceSrcElement,SVGFontFaceUriElement,SVGForeignObjectElement,SVGGElement,SVGGlyphElement,SVGGlyphRefElement,SVGGradientElement,SVGLinearGradientElement,SVGRadialGradientElement,SVGHKernElement,SVGImageElement,SVGLineElement,SVGMarkerElement,SVGMaskElement,SVGMetadataElement,SVGMissingGlyphElement,SVGMPathElement,SVGPathElement,SVGPatternElement,SVGPolylineElement,SVGPolygonElement,SVGRectElement,SVGScriptElement,SVGStopElement,SVGStyleElement,SVGSVGElement,SVGSwitchElement,SVGSymbolElement,SVGTextElement,SVGTextPathElement,SVGTitleElement,SVGTRefElement,SVGTSpanElement,SVGUseElement,SVGViewElement,SVGVKernElement,SVGAngle,SVGColor,SVGICCColor,SVGElementInstance,SVGElementInstanceList,SVGLength,SVGLengthList,SVGMatrix,SVGNumber,SVGNumberList,SVGPaint,SVGPoint,SVGPointList,SVGPreserveAspectRatio,SVGRect,SVGStringList,SVGTransform,SVGTransformList,SVGAnimatedAngle,SVGAnimatedBoolean,SVGAnimatedEnumeration,SVGAnimatedInteger,SVGAnimatedLength,SVGAnimatedLengthList,SVGAnimatedNumber,SVGAnimatedNumberList,SVGAnimatedPreserveAspectRatio,SVGAnimatedRect,SVGAnimatedString,SVGAnimatedTransformList,SVGPathSegList,SVGPathSeg,SVGPathSegArcAbs,SVGPathSegArcRel,SVGPathSegClosePath,SVGPathSegCurvetoCubicAbs,SVGPathSegCurvetoCubicRel,SVGPathSegCurvetoCubicSmoothAbs,SVGPathSegCurvetoCubicSmoothRel,SVGPathSegCurvetoQuadraticAbs,SVGPathSegCurvetoQuadraticRel,SVGPathSegCurvetoQuadraticSmoothAbs,SVGPathSegCurvetoQuadraticSmoothRel,SVGPathSegLinetoAbs,SVGPathSegLinetoHorizontalAbs,SVGPathSegLinetoHorizontalRel,SVGPathSegLinetoRel,SVGPathSegLinetoVerticalAbs,SVGPathSegLinetoVerticalRel,SVGPathSegMovetoAbs,SVGPathSegMovetoRel,ElementTimeControl,TimeEvent,SVGAnimatedPathData,SVGAnimatedPoints,SVGColorProfileRule,SVGCSSRule,SVGExternalResourcesRequired,SVGFitToViewBox,SVGLangSpace,SVGLocatable,SVGRenderingIntent,SVGStylable,SVGTests,SVGTextContentElement,SVGTextPositioningElement,SVGTransformable,SVGUnitTypes,SVGURIReference,SVGViewSpec,SVGZoomAndPan&quot;</span><span class="s1">);</span>
<a name="l6"><span class="ln">6    </span></a><span class="s1">Blockly.JavaScript.ORDER_ATOMIC=</span><span class="s4">0</span><span class="s1">;Blockly.JavaScript.ORDER_NEW=</span><span class="s4">1.1</span><span class="s1">;Blockly.JavaScript.ORDER_MEMBER=</span><span class="s4">1.2</span><span class="s1">;Blockly.JavaScript.ORDER_FUNCTION_CALL=</span><span class="s4">2</span><span class="s1">;Blockly.JavaScript.ORDER_INCREMENT=</span><span class="s4">3</span><span class="s1">;Blockly.JavaScript.ORDER_DECREMENT=</span><span class="s4">3</span><span class="s1">;Blockly.JavaScript.ORDER_BITWISE_NOT=</span><span class="s4">4.1</span><span class="s1">;Blockly.JavaScript.ORDER_UNARY_PLUS=</span><span class="s4">4.2</span><span class="s1">;Blockly.JavaScript.ORDER_UNARY_NEGATION=</span><span class="s4">4.3</span><span class="s1">;Blockly.JavaScript.ORDER_LOGICAL_NOT=</span><span class="s4">4.4</span><span class="s1">;Blockly.JavaScript.ORDER_TYPEOF=</span><span class="s4">4.5</span><span class="s1">;Blockly.JavaScript.ORDER_VOID=</span><span class="s4">4.6</span><span class="s1">;Blockly.JavaScript.ORDER_DELETE=</span><span class="s4">4.7</span><span class="s1">;</span>
<a name="l7"><span class="ln">7    </span></a><span class="s1">Blockly.JavaScript.ORDER_AWAIT=</span><span class="s4">4.8</span><span class="s1">;Blockly.JavaScript.ORDER_EXPONENTIATION=</span><span class="s4">5</span><span class="s1">;Blockly.JavaScript.ORDER_MULTIPLICATION=</span><span class="s4">5.1</span><span class="s1">;Blockly.JavaScript.ORDER_DIVISION=</span><span class="s4">5.2</span><span class="s1">;Blockly.JavaScript.ORDER_MODULUS=</span><span class="s4">5.3</span><span class="s1">;Blockly.JavaScript.ORDER_SUBTRACTION=</span><span class="s4">6.1</span><span class="s1">;Blockly.JavaScript.ORDER_ADDITION=</span><span class="s4">6.2</span><span class="s1">;Blockly.JavaScript.ORDER_BITWISE_SHIFT=</span><span class="s4">7</span><span class="s1">;Blockly.JavaScript.ORDER_RELATIONAL=</span><span class="s4">8</span><span class="s1">;Blockly.JavaScript.ORDER_IN=</span><span class="s4">8</span><span class="s1">;Blockly.JavaScript.ORDER_INSTANCEOF=</span><span class="s4">8</span><span class="s1">;Blockly.JavaScript.ORDER_EQUALITY=</span><span class="s4">9</span><span class="s1">;Blockly.JavaScript.ORDER_BITWISE_AND=</span><span class="s4">10</span><span class="s1">;</span>
<a name="l8"><span class="ln">8    </span></a><span class="s1">Blockly.JavaScript.ORDER_BITWISE_XOR=</span><span class="s4">11</span><span class="s1">;Blockly.JavaScript.ORDER_BITWISE_OR=</span><span class="s4">12</span><span class="s1">;Blockly.JavaScript.ORDER_LOGICAL_AND=</span><span class="s4">13</span><span class="s1">;Blockly.JavaScript.ORDER_LOGICAL_OR=</span><span class="s4">14</span><span class="s1">;Blockly.JavaScript.ORDER_CONDITIONAL=</span><span class="s4">15</span><span class="s1">;Blockly.JavaScript.ORDER_ASSIGNMENT=</span><span class="s4">16</span><span class="s1">;Blockly.JavaScript.ORDER_YIELD=</span><span class="s4">17</span><span class="s1">;Blockly.JavaScript.ORDER_COMMA=</span><span class="s4">18</span><span class="s1">;Blockly.JavaScript.ORDER_NONE=</span><span class="s4">99</span><span class="s1">;</span>
<a name="l9"><span class="ln">9    </span></a><span class="s1">Blockly.JavaScript.ORDER_OVERRIDES=[[Blockly.JavaScript.ORDER_FUNCTION_CALL,Blockly.JavaScript.ORDER_MEMBER],[Blockly.JavaScript.ORDER_FUNCTION_CALL,Blockly.JavaScript.ORDER_FUNCTION_CALL],[Blockly.JavaScript.ORDER_MEMBER,Blockly.JavaScript.ORDER_MEMBER],[Blockly.JavaScript.ORDER_MEMBER,Blockly.JavaScript.ORDER_FUNCTION_CALL],[Blockly.JavaScript.ORDER_LOGICAL_NOT,Blockly.JavaScript.ORDER_LOGICAL_NOT],[Blockly.JavaScript.ORDER_MULTIPLICATION,Blockly.JavaScript.ORDER_MULTIPLICATION],[Blockly.JavaScript.ORDER_ADDITION,</span>
<a name="l10"><span class="ln">10   </span></a><span class="s1">Blockly.JavaScript.ORDER_ADDITION],[Blockly.JavaScript.ORDER_LOGICAL_AND,Blockly.JavaScript.ORDER_LOGICAL_AND],[Blockly.JavaScript.ORDER_LOGICAL_OR,Blockly.JavaScript.ORDER_LOGICAL_OR]];</span>
<a name="l11"><span class="ln">11   </span></a><span class="s1">Blockly.JavaScript.init=</span><span class="s3">function</span><span class="s1">(a){Blockly.JavaScript.definitions_=Object.create(</span><span class="s3">null</span><span class="s1">);Blockly.JavaScript.functionNames_=Object.create(</span><span class="s3">null</span><span class="s1">);Blockly.JavaScript.variableDB_?Blockly.JavaScript.variableDB_.reset():Blockly.JavaScript.variableDB_=</span><span class="s3">new </span><span class="s1">Blockly.Names(Blockly.JavaScript.RESERVED_WORDS_);Blockly.JavaScript.variableDB_.setVariableMap(a.getVariableMap());</span><span class="s3">for</span><span class="s1">(</span><span class="s3">var </span><span class="s1">b=[],c=Blockly.Variables.allDeveloperVariables(a),d=</span><span class="s4">0</span><span class="s1">;d&lt;c.length;d++)b.push(Blockly.JavaScript.variableDB_.getName(c[d],Blockly.Names.DEVELOPER_VARIABLE_TYPE));</span>
<a name="l12"><span class="ln">12   </span></a><span class="s1">a=Blockly.Variables.allUsedVarModels(a);</span><span class="s3">for</span><span class="s1">(d=</span><span class="s4">0</span><span class="s1">;d&lt;a.length;d++)b.push(Blockly.JavaScript.variableDB_.getName(a[d].getId(),Blockly.Variables.NAME_TYPE));b.length&amp;&amp;(Blockly.JavaScript.definitions_.variables=</span><span class="s2">&quot;var &quot;</span><span class="s1">+b.join(</span><span class="s2">&quot;, &quot;</span><span class="s1">)+</span><span class="s2">&quot;;&quot;</span><span class="s1">)};</span>
<a name="l13"><span class="ln">13   </span></a><span class="s1">Blockly.JavaScript.finish=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=[],c;</span><span class="s3">for</span><span class="s1">(c </span><span class="s3">in </span><span class="s1">Blockly.JavaScript.definitions_)b.push(Blockly.JavaScript.definitions_[c]);</span><span class="s3">delete </span><span class="s1">Blockly.JavaScript.definitions_;</span><span class="s3">delete </span><span class="s1">Blockly.JavaScript.functionNames_;Blockly.JavaScript.variableDB_.reset();</span><span class="s3">return </span><span class="s1">b.join(</span><span class="s2">&quot;</span><span class="s5">\n\n</span><span class="s2">&quot;</span><span class="s1">)+</span><span class="s2">&quot;</span><span class="s5">\n\n\n</span><span class="s2">&quot;</span><span class="s1">+a};Blockly.JavaScript.scrubNakedValue=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return </span><span class="s1">a+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};Blockly.JavaScript.quote_=</span><span class="s3">function</span><span class="s1">(a){a=a.replace(/\\/g,</span><span class="s2">&quot;</span><span class="s5">\\\\</span><span class="s2">&quot;</span><span class="s1">).replace(/\n/g,</span><span class="s2">&quot;</span><span class="s5">\\\n</span><span class="s2">&quot;</span><span class="s1">).replace(/</span><span class="s2">'/g,&quot;</span><span class="s5">\\</span><span class="s2">'&quot;);return&quot;'&quot;+a+&quot;'&quot;};</span>
<a name="l14"><span class="ln">14   </span></a><span class="s1">Blockly.JavaScript.scrub_=</span><span class="s3">function</span><span class="s1">(a,b,c){</span><span class="s3">var </span><span class="s1">d=</span><span class="s2">&quot;&quot;</span><span class="s1">;</span><span class="s3">if</span><span class="s1">(!a.outputConnection||!a.outputConnection.targetConnection){</span><span class="s3">var </span><span class="s1">e=a.getCommentText();(e=Blockly.utils.string.wrap(e,Blockly.JavaScript.COMMENT_WRAP-3))&amp;&amp;(d=a.getProcedureDef?d+(</span><span class="s2">&quot;/**</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+Blockly.JavaScript.prefixLines(e+</span><span class="s2">&quot;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">,</span><span class="s2">&quot; * &quot;</span><span class="s1">)+</span><span class="s2">&quot; */</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">):d+Blockly.JavaScript.prefixLines(e+</span><span class="s2">&quot;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">,</span><span class="s2">&quot;// &quot;</span><span class="s1">));</span><span class="s3">for</span><span class="s1">(</span><span class="s3">var </span><span class="s1">f=</span><span class="s4">0</span><span class="s1">;f&lt;a.inputList.length;f++)a.inputList[f].type==Blockly.INPUT_VALUE&amp;&amp;(e=a.inputList[f].connection.targetBlock())&amp;&amp;(e=Blockly.JavaScript.allNestedComments(e))&amp;&amp;</span>
<a name="l15"><span class="ln">15   </span></a><span class="s1">(d+=Blockly.JavaScript.prefixLines(e,</span><span class="s2">&quot;// &quot;</span><span class="s1">))}a=a.nextConnection&amp;&amp;a.nextConnection.targetBlock();c=c?</span><span class="s2">&quot;&quot;</span><span class="s1">:Blockly.JavaScript.blockToCode(a);</span><span class="s3">return </span><span class="s1">d+b+c};</span>
<a name="l16"><span class="ln">16   </span></a><span class="s1">Blockly.JavaScript.getAdjusted=</span><span class="s3">function</span><span class="s1">(a,b,c,d,e){c=c||</span><span class="s4">0</span><span class="s1">;e=e||Blockly.JavaScript.ORDER_NONE;a.workspace.options.oneBasedIndex&amp;&amp;c--;</span><span class="s3">var </span><span class="s1">f=a.workspace.options.oneBasedIndex?</span><span class="s2">&quot;1&quot;</span><span class="s1">:</span><span class="s2">&quot;0&quot;</span><span class="s1">;a=</span><span class="s4">0</span><span class="s1">&lt;c?Blockly.JavaScript.valueToCode(a,b,Blockly.JavaScript.ORDER_ADDITION)||f:</span><span class="s4">0</span><span class="s1">&gt;c?Blockly.JavaScript.valueToCode(a,b,Blockly.JavaScript.ORDER_SUBTRACTION)||f:d?Blockly.JavaScript.valueToCode(a,b,Blockly.JavaScript.ORDER_UNARY_NEGATION)||f:Blockly.JavaScript.valueToCode(a,b,e)||f;</span><span class="s3">if</span><span class="s1">(Blockly.isNumber(a))a=parseFloat(a)+c,</span>
<a name="l17"><span class="ln">17   </span></a><span class="s1">d&amp;&amp;(a=-a);</span><span class="s3">else</span><span class="s1">{</span><span class="s3">if</span><span class="s1">(</span><span class="s4">0</span><span class="s1">&lt;c){a=a+</span><span class="s2">&quot; + &quot;</span><span class="s1">+c;</span><span class="s3">var </span><span class="s1">g=Blockly.JavaScript.ORDER_ADDITION}</span><span class="s3">else </span><span class="s4">0</span><span class="s1">&gt;c&amp;&amp;(a=a+</span><span class="s2">&quot; - &quot;</span><span class="s1">+-c,g=Blockly.JavaScript.ORDER_SUBTRACTION);d&amp;&amp;(a=c?</span><span class="s2">&quot;-(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">:</span><span class="s2">&quot;-&quot;</span><span class="s1">+a,g=Blockly.JavaScript.ORDER_UNARY_NEGATION);g=Math.floor(g);e=Math.floor(e);g&amp;&amp;e&gt;=g&amp;&amp;(a=</span><span class="s2">&quot;(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">)}</span><span class="s3">return </span><span class="s1">a};Blockly.JavaScript.colour={};Blockly.JavaScript.colour_picker=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.quote_(a.getFieldValue(</span><span class="s2">&quot;COLOUR&quot;</span><span class="s1">)),Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.colour_random=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;colourRandom&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;() {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var num = Math.floor(Math.random() * Math.pow(2, 24));&quot;</span><span class="s1">,</span><span class="s2">&quot;  return '#' + ('00000' + num.toString(16)).substr(-6);&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;()&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l18"><span class="ln">18   </span></a><span class="s1">Blockly.JavaScript.colour_rgb=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;RED&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s4">0</span><span class="s1">,c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;GREEN&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s4">0</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;BLUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s4">0</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;colourRgb&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(r, g, b) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;&quot;</span><span class="s1">,</span><span class="s2">&quot;  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;&quot;</span><span class="s1">,</span>
<a name="l19"><span class="ln">19   </span></a><span class="s2">&quot;  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;&quot;</span><span class="s1">,</span><span class="s2">&quot;  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);&quot;</span><span class="s1">,</span><span class="s2">&quot;  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);&quot;</span><span class="s1">,</span><span class="s2">&quot;  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);&quot;</span><span class="s1">,</span><span class="s2">&quot;  return '#' + r + g + b;&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+b+</span><span class="s2">&quot;, &quot;</span><span class="s1">+c+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l20"><span class="ln">20   </span></a><span class="s1">Blockly.JavaScript.colour_blend=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;COLOUR1&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;'#000000'&quot;</span><span class="s1">,c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;COLOUR2&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;'#000000'&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;RATIO&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||.</span><span class="s4">5</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;colourBlend&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(c1, c2, ratio) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  ratio = Math.max(Math.min(Number(ratio), 1), 0);&quot;</span><span class="s1">,</span><span class="s2">&quot;  var r1 = parseInt(c1.substring(1, 3), 16);&quot;</span><span class="s1">,</span>
<a name="l21"><span class="ln">21   </span></a><span class="s2">&quot;  var g1 = parseInt(c1.substring(3, 5), 16);&quot;</span><span class="s1">,</span><span class="s2">&quot;  var b1 = parseInt(c1.substring(5, 7), 16);&quot;</span><span class="s1">,</span><span class="s2">&quot;  var r2 = parseInt(c2.substring(1, 3), 16);&quot;</span><span class="s1">,</span><span class="s2">&quot;  var g2 = parseInt(c2.substring(3, 5), 16);&quot;</span><span class="s1">,</span><span class="s2">&quot;  var b2 = parseInt(c2.substring(5, 7), 16);&quot;</span><span class="s1">,</span><span class="s2">&quot;  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);&quot;</span><span class="s1">,</span><span class="s2">&quot;  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);&quot;</span><span class="s1">,</span><span class="s2">&quot;  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);&quot;</span><span class="s1">,</span><span class="s2">&quot;  r = ('0' + (r || 0).toString(16)).slice(-2);&quot;</span><span class="s1">,</span><span class="s2">&quot;  g = ('0' + (g || 0).toString(16)).slice(-2);&quot;</span><span class="s1">,</span><span class="s2">&quot;  b = ('0' + (b || 0).toString(16)).slice(-2);&quot;</span><span class="s1">,</span>
<a name="l22"><span class="ln">22   </span></a><span class="s2">&quot;  return '#' + r + g + b;&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+b+</span><span class="s2">&quot;, &quot;</span><span class="s1">+c+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.lists={};Blockly.JavaScript.lists_create_empty=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;[]&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.lists_create_with=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">for</span><span class="s1">(</span><span class="s3">var </span><span class="s1">b=Array(a.itemCount_),c=</span><span class="s4">0</span><span class="s1">;c&lt;a.itemCount_;c++)b[c]=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;ADD&quot;</span><span class="s1">+c,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;null&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;[&quot;</span><span class="s1">+b.join(</span><span class="s2">&quot;, &quot;</span><span class="s1">)+</span><span class="s2">&quot;]&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ATOMIC]};</span>
<a name="l23"><span class="ln">23   </span></a><span class="s1">Blockly.JavaScript.lists_repeat=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;listsRepeat&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(value, n) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var array = [];&quot;</span><span class="s1">,</span><span class="s2">&quot;  for (var i = 0; i &lt; n; i++) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    array[i] = value;&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;  return array;&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">]),c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;ITEM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;null&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;NUM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+c+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l24"><span class="ln">24   </span></a><span class="s1">Blockly.JavaScript.lists_length=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">)+</span><span class="s2">&quot;.length&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.lists_isEmpty=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;!&quot;</span><span class="s1">+(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">)+</span><span class="s2">&quot;.length&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_LOGICAL_NOT]};</span>
<a name="l25"><span class="ln">25   </span></a><span class="s1">Blockly.JavaScript.lists_indexOf=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=</span><span class="s2">&quot;FIRST&quot;</span><span class="s1">==a.getFieldValue(</span><span class="s2">&quot;END&quot;</span><span class="s1">)?</span><span class="s2">&quot;indexOf&quot;</span><span class="s1">:</span><span class="s2">&quot;lastIndexOf&quot;</span><span class="s1">,c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;FIND&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;b=(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">)+</span><span class="s2">&quot;.&quot;</span><span class="s1">+b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+c+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">return </span><span class="s1">a.workspace.options.oneBasedIndex?[b+</span><span class="s2">&quot; + 1&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ADDITION]:[b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l26"><span class="ln">26   </span></a><span class="s1">Blockly.JavaScript.lists_getIndex=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=a.getFieldValue(</span><span class="s2">&quot;MODE&quot;</span><span class="s1">)||</span><span class="s2">&quot;GET&quot;</span><span class="s1">,c=a.getFieldValue(</span><span class="s2">&quot;WHERE&quot;</span><span class="s1">)||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">,d=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,</span><span class="s2">&quot;RANDOM&quot;</span><span class="s1">==c?Blockly.JavaScript.ORDER_COMMA:Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;</span><span class="s3">switch</span><span class="s1">(c){</span><span class="s3">case </span><span class="s2">&quot;FIRST&quot;</span><span class="s1">:</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot;[0]&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER];</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET_REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot;.shift()&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER];</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return </span><span class="s1">d+</span><span class="s2">&quot;.shift();</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;LAST&quot;</span><span class="s1">:</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot;.slice(-1)[0]&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER];</span>
<a name="l27"><span class="ln">27   </span></a><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET_REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot;.pop()&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER];</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return </span><span class="s1">d+</span><span class="s2">&quot;.pop();</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">:a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot;[&quot;</span><span class="s1">+a+</span><span class="s2">&quot;]&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER];</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET_REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot;.splice(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;, 1)[0]&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return </span><span class="s1">d+</span><span class="s2">&quot;.splice(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;, 1);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">:a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT&quot;</span><span class="s1">,</span><span class="s4">1</span><span class="s1">,!</span><span class="s4">0</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot;.slice(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)[0]&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span>
<a name="l28"><span class="ln">28   </span></a><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET_REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot;.splice(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;, 1)[0]&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return </span><span class="s1">d+</span><span class="s2">&quot;.splice(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;, 1);&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;RANDOM&quot;</span><span class="s1">:d=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;listsGetRandomItem&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(list, remove) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var x = Math.floor(Math.random() * list.length);&quot;</span><span class="s1">,</span><span class="s2">&quot;  if (remove) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    return list.splice(x, 1)[0];&quot;</span><span class="s1">,</span><span class="s2">&quot;  } else {&quot;</span><span class="s1">,</span><span class="s2">&quot;    return list[x];&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+d+</span><span class="s2">&quot;, &quot;</span><span class="s1">+(</span><span class="s2">&quot;GET&quot;</span><span class="s1">!=b)+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;GET&quot;</span><span class="s1">==b||</span><span class="s2">&quot;GET_REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return</span><span class="s1">[d,</span>
<a name="l29"><span class="ln">29   </span></a><span class="s1">Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;REMOVE&quot;</span><span class="s1">==b)</span><span class="s3">return </span><span class="s1">d+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">}</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unhandled combination (lists_getIndex).&quot;</span><span class="s1">);};</span>
<a name="l30"><span class="ln">30   </span></a><span class="s1">Blockly.JavaScript.lists_setIndex=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">function </span><span class="s1">b(){</span><span class="s3">if</span><span class="s1">(c.match(/^\w+$/))</span><span class="s3">return</span><span class="s2">&quot;&quot;</span><span class="s1">;</span><span class="s3">var </span><span class="s1">a=Blockly.JavaScript.variableDB_.getDistinctName(</span><span class="s2">&quot;tmpList&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE),b=</span><span class="s2">&quot;var &quot;</span><span class="s1">+a+</span><span class="s2">&quot; = &quot;</span><span class="s1">+c+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;c=a;</span><span class="s3">return </span><span class="s1">b}</span><span class="s3">var </span><span class="s1">c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">,d=a.getFieldValue(</span><span class="s2">&quot;MODE&quot;</span><span class="s1">)||</span><span class="s2">&quot;GET&quot;</span><span class="s1">,e=a.getFieldValue(</span><span class="s2">&quot;WHERE&quot;</span><span class="s1">)||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">,f=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TO&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ASSIGNMENT)||</span><span class="s2">&quot;null&quot;</span><span class="s1">;</span><span class="s3">switch</span><span class="s1">(e){</span><span class="s3">case </span><span class="s2">&quot;FIRST&quot;</span><span class="s1">:</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;SET&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">c+</span>
<a name="l31"><span class="ln">31   </span></a><span class="s2">&quot;[0] = &quot;</span><span class="s1">+f+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;INSERT&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">c+</span><span class="s2">&quot;.unshift(&quot;</span><span class="s1">+f+</span><span class="s2">&quot;);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;LAST&quot;</span><span class="s1">:</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;SET&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">a=b(),a+(c+</span><span class="s2">&quot;[&quot;</span><span class="s1">+c+</span><span class="s2">&quot;.length - 1] = &quot;</span><span class="s1">+f+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;INSERT&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">c+</span><span class="s2">&quot;.push(&quot;</span><span class="s1">+f+</span><span class="s2">&quot;);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">:e=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;SET&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">c+</span><span class="s2">&quot;[&quot;</span><span class="s1">+e+</span><span class="s2">&quot;] = &quot;</span><span class="s1">+f+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;INSERT&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">c+</span><span class="s2">&quot;.splice(&quot;</span><span class="s1">+e+</span><span class="s2">&quot;, 0, &quot;</span><span class="s1">+f+</span><span class="s2">&quot;);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">:e=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT&quot;</span><span class="s1">,</span><span class="s4">1</span><span class="s1">,!</span><span class="s4">1</span><span class="s1">,Blockly.JavaScript.ORDER_SUBTRACTION);a=b();</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;SET&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">a+(c+</span><span class="s2">&quot;[&quot;</span><span class="s1">+c+</span><span class="s2">&quot;.length - &quot;</span><span class="s1">+e+</span>
<a name="l32"><span class="ln">32   </span></a><span class="s2">&quot;] = &quot;</span><span class="s1">+f+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;INSERT&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">a+(c+</span><span class="s2">&quot;.splice(&quot;</span><span class="s1">+c+</span><span class="s2">&quot;.length - &quot;</span><span class="s1">+e+</span><span class="s2">&quot;, 0, &quot;</span><span class="s1">+f+</span><span class="s2">&quot;);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">);</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;RANDOM&quot;</span><span class="s1">:a=b();e=Blockly.JavaScript.variableDB_.getDistinctName(</span><span class="s2">&quot;tmpX&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE);a+=</span><span class="s2">&quot;var &quot;</span><span class="s1">+e+</span><span class="s2">&quot; = Math.floor(Math.random() * &quot;</span><span class="s1">+c+</span><span class="s2">&quot;.length);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;SET&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">a+(c+</span><span class="s2">&quot;[&quot;</span><span class="s1">+e+</span><span class="s2">&quot;] = &quot;</span><span class="s1">+f+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;INSERT&quot;</span><span class="s1">==d)</span><span class="s3">return </span><span class="s1">a+(c+</span><span class="s2">&quot;.splice(&quot;</span><span class="s1">+e+</span><span class="s2">&quot;, 0, &quot;</span><span class="s1">+f+</span><span class="s2">&quot;);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">)}</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unhandled combination (lists_setIndex).&quot;</span><span class="s1">);};</span>
<a name="l33"><span class="ln">33   </span></a><span class="s1">Blockly.JavaScript.lists.getIndex_=</span><span class="s3">function</span><span class="s1">(a,b,c){</span><span class="s3">return</span><span class="s2">&quot;FIRST&quot;</span><span class="s1">==b?</span><span class="s2">&quot;0&quot;</span><span class="s1">:</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==b?a+</span><span class="s2">&quot;.length - 1 - &quot;</span><span class="s1">+c:</span><span class="s2">&quot;LAST&quot;</span><span class="s1">==b?a+</span><span class="s2">&quot;.length - 1&quot;</span><span class="s1">:c};</span>
<a name="l34"><span class="ln">34   </span></a><span class="s1">Blockly.JavaScript.lists_getSublist=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">,c=a.getFieldValue(</span><span class="s2">&quot;WHERE1&quot;</span><span class="s1">),d=a.getFieldValue(</span><span class="s2">&quot;WHERE2&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;FIRST&quot;</span><span class="s1">==c&amp;&amp;</span><span class="s2">&quot;LAST&quot;</span><span class="s1">==d)b+=</span><span class="s2">&quot;.slice(0)&quot;</span><span class="s1">;</span><span class="s3">else if</span><span class="s1">(b.match(/^\w+$/)||</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">!=c&amp;&amp;</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==d){</span><span class="s3">switch</span><span class="s1">(c){</span><span class="s3">case </span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">:</span><span class="s3">var </span><span class="s1">e=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT1&quot;</span><span class="s1">);</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">:e=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT1&quot;</span><span class="s1">,</span><span class="s4">1</span><span class="s1">,!</span><span class="s4">1</span><span class="s1">,Blockly.JavaScript.ORDER_SUBTRACTION);e=b+</span><span class="s2">&quot;.length - &quot;</span><span class="s1">+e;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FIRST&quot;</span><span class="s1">:e=</span>
<a name="l35"><span class="ln">35   </span></a><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">default</span><span class="s1">:</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unhandled option (lists_getSublist).&quot;</span><span class="s1">);}</span><span class="s3">switch</span><span class="s1">(d){</span><span class="s3">case </span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">:a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT2&quot;</span><span class="s1">,</span><span class="s4">1</span><span class="s1">);</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">:a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT2&quot;</span><span class="s1">,</span><span class="s4">0</span><span class="s1">,!</span><span class="s4">1</span><span class="s1">,Blockly.JavaScript.ORDER_SUBTRACTION);a=b+</span><span class="s2">&quot;.length - &quot;</span><span class="s1">+a;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;LAST&quot;</span><span class="s1">:a=b+</span><span class="s2">&quot;.length&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">default</span><span class="s1">:</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unhandled option (lists_getSublist).&quot;</span><span class="s1">);}b=b+</span><span class="s2">&quot;.slice(&quot;</span><span class="s1">+e+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">}</span><span class="s3">else</span><span class="s1">{e=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT1&quot;</span><span class="s1">);a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT2&quot;</span><span class="s1">);</span><span class="s3">var </span><span class="s1">f=Blockly.JavaScript.lists.getIndex_,</span>
<a name="l36"><span class="ln">36   </span></a><span class="s1">g={FIRST:</span><span class="s2">&quot;First&quot;</span><span class="s1">,LAST:</span><span class="s2">&quot;Last&quot;</span><span class="s1">,FROM_START:</span><span class="s2">&quot;FromStart&quot;</span><span class="s1">,FROM_END:</span><span class="s2">&quot;FromEnd&quot;</span><span class="s1">};b=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;subsequence&quot;</span><span class="s1">+g[c]+g[d],[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(sequence&quot;</span><span class="s1">+(</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==c||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==c?</span><span class="s2">&quot;, at1&quot;</span><span class="s1">:</span><span class="s2">&quot;&quot;</span><span class="s1">)+(</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==d||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==d?</span><span class="s2">&quot;, at2&quot;</span><span class="s1">:</span><span class="s2">&quot;&quot;</span><span class="s1">)+</span><span class="s2">&quot;) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var start = &quot;</span><span class="s1">+f(</span><span class="s2">&quot;sequence&quot;</span><span class="s1">,c,</span><span class="s2">&quot;at1&quot;</span><span class="s1">)+</span><span class="s2">&quot;;&quot;</span><span class="s1">,</span><span class="s2">&quot;  var end = &quot;</span><span class="s1">+f(</span><span class="s2">&quot;sequence&quot;</span><span class="s1">,d,</span><span class="s2">&quot;at2&quot;</span><span class="s1">)+</span><span class="s2">&quot; + 1;&quot;</span><span class="s1">,</span><span class="s2">&quot;  return sequence.slice(start, end);&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+b+(</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==c||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==c?</span><span class="s2">&quot;, &quot;</span><span class="s1">+e:</span><span class="s2">&quot;&quot;</span><span class="s1">)+(</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==d||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==</span>
<a name="l37"><span class="ln">37   </span></a><span class="s1">d?</span><span class="s2">&quot;, &quot;</span><span class="s1">+a:</span><span class="s2">&quot;&quot;</span><span class="s1">)+</span><span class="s2">&quot;)&quot;</span><span class="s1">}</span><span class="s3">return</span><span class="s1">[b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l38"><span class="ln">38   </span></a><span class="s1">Blockly.JavaScript.lists_sort=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">,c=</span><span class="s2">&quot;1&quot;</span><span class="s1">===a.getFieldValue(</span><span class="s2">&quot;DIRECTION&quot;</span><span class="s1">)?</span><span class="s4">1</span><span class="s1">:-</span><span class="s4">1</span><span class="s1">;a=a.getFieldValue(</span><span class="s2">&quot;TYPE&quot;</span><span class="s1">);</span><span class="s3">var </span><span class="s1">d=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;listsGetSortCompare&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(type, direction) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var compareFuncs = {&quot;</span><span class="s1">,</span><span class="s2">'    &quot;NUMERIC&quot;: function(a, b) {'</span><span class="s1">,</span><span class="s2">&quot;        return parseFloat(a) - parseFloat(b); },&quot;</span><span class="s1">,</span><span class="s2">'    &quot;TEXT&quot;: function(a, b) {'</span><span class="s1">,</span><span class="s2">&quot;        return a.toString() &gt; b.toString() ? 1 : -1; },&quot;</span><span class="s1">,</span>
<a name="l39"><span class="ln">39   </span></a><span class="s2">'    &quot;IGNORE_CASE&quot;: function(a, b) {'</span><span class="s1">,</span><span class="s2">&quot;        return a.toString().toLowerCase() &gt; b.toString().toLowerCase() ? 1 : -1; },&quot;</span><span class="s1">,</span><span class="s2">&quot;  };&quot;</span><span class="s1">,</span><span class="s2">&quot;  var compare = compareFuncs[type];&quot;</span><span class="s1">,</span><span class="s2">&quot;  return function(a, b) { return compare(a, b) * direction; }&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">]);</span><span class="s3">return</span><span class="s1">[b+</span><span class="s2">&quot;.slice().sort(&quot;</span><span class="s1">+d+</span><span class="s2">'(&quot;'</span><span class="s1">+a+</span><span class="s2">'&quot;, '</span><span class="s1">+c+</span><span class="s2">&quot;))&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l40"><span class="ln">40   </span></a><span class="s1">Blockly.JavaScript.lists_split=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;INPUT&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER),c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;DELIM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;a=a.getFieldValue(</span><span class="s2">&quot;MODE&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;SPLIT&quot;</span><span class="s1">==a)b||(b=</span><span class="s2">&quot;''&quot;</span><span class="s1">),a=</span><span class="s2">&quot;split&quot;</span><span class="s1">;</span><span class="s3">else if</span><span class="s1">(</span><span class="s2">&quot;JOIN&quot;</span><span class="s1">==a)b||(b=</span><span class="s2">&quot;[]&quot;</span><span class="s1">),a=</span><span class="s2">&quot;join&quot;</span><span class="s1">;</span><span class="s3">else throw </span><span class="s1">Error(</span><span class="s2">&quot;Unknown mode: &quot;</span><span class="s1">+a);</span><span class="s3">return</span><span class="s1">[b+</span><span class="s2">&quot;.&quot;</span><span class="s1">+a+</span><span class="s2">&quot;(&quot;</span><span class="s1">+c+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l41"><span class="ln">41   </span></a><span class="s1">Blockly.JavaScript.lists_reverse=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">)+</span><span class="s2">&quot;.slice().reverse()&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.logic={};</span>
<a name="l42"><span class="ln">42   </span></a><span class="s1">Blockly.JavaScript.controls_if=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=</span><span class="s4">0</span><span class="s1">,c=</span><span class="s2">&quot;&quot;</span><span class="s1">;Blockly.JavaScript.STATEMENT_PREFIX&amp;&amp;(c+=Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,a));</span><span class="s3">do</span><span class="s1">{</span><span class="s3">var </span><span class="s1">d=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;IF&quot;</span><span class="s1">+b,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;false&quot;</span><span class="s1">;</span><span class="s3">var </span><span class="s1">e=Blockly.JavaScript.statementToCode(a,</span><span class="s2">&quot;DO&quot;</span><span class="s1">+b);Blockly.JavaScript.STATEMENT_SUFFIX&amp;&amp;(e=Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,a),Blockly.JavaScript.INDENT)+e);c+=(</span><span class="s4">0</span><span class="s1">&lt;b?</span><span class="s2">&quot; else &quot;</span><span class="s1">:</span><span class="s2">&quot;&quot;</span><span class="s1">)+</span><span class="s2">&quot;if (&quot;</span><span class="s1">+</span>
<a name="l43"><span class="ln">43   </span></a><span class="s1">d+</span><span class="s2">&quot;) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+e+</span><span class="s2">&quot;}&quot;</span><span class="s1">;++b}</span><span class="s3">while</span><span class="s1">(a.getInput(</span><span class="s2">&quot;IF&quot;</span><span class="s1">+b));</span><span class="s3">if</span><span class="s1">(a.getInput(</span><span class="s2">&quot;ELSE&quot;</span><span class="s1">)||Blockly.JavaScript.STATEMENT_SUFFIX)e=Blockly.JavaScript.statementToCode(a,</span><span class="s2">&quot;ELSE&quot;</span><span class="s1">),Blockly.JavaScript.STATEMENT_SUFFIX&amp;&amp;(e=Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,a),Blockly.JavaScript.INDENT)+e),c+=</span><span class="s2">&quot; else {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+e+</span><span class="s2">&quot;}&quot;</span><span class="s1">;</span><span class="s3">return </span><span class="s1">c+</span><span class="s2">&quot;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};Blockly.JavaScript.controls_ifelse=Blockly.JavaScript.controls_if;</span>
<a name="l44"><span class="ln">44   </span></a><span class="s1">Blockly.JavaScript.logic_compare=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b={EQ:</span><span class="s2">&quot;==&quot;</span><span class="s1">,NEQ:</span><span class="s2">&quot;!=&quot;</span><span class="s1">,LT:</span><span class="s2">&quot;&lt;&quot;</span><span class="s1">,LTE:</span><span class="s2">&quot;&lt;=&quot;</span><span class="s1">,GT:</span><span class="s2">&quot;&gt;&quot;</span><span class="s1">,GTE:</span><span class="s2">&quot;&gt;=&quot;</span><span class="s1">}[a.getFieldValue(</span><span class="s2">&quot;OP&quot;</span><span class="s1">)],c=</span><span class="s2">&quot;==&quot;</span><span class="s1">==b||</span><span class="s2">&quot;!=&quot;</span><span class="s1">==b?Blockly.JavaScript.ORDER_EQUALITY:Blockly.JavaScript.ORDER_RELATIONAL,d=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;A&quot;</span><span class="s1">,c)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;B&quot;</span><span class="s1">,c)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot; &quot;</span><span class="s1">+b+</span><span class="s2">&quot; &quot;</span><span class="s1">+a,c]};</span>
<a name="l45"><span class="ln">45   </span></a><span class="s1">Blockly.JavaScript.logic_operation=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=</span><span class="s2">&quot;AND&quot;</span><span class="s1">==a.getFieldValue(</span><span class="s2">&quot;OP&quot;</span><span class="s1">)?</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="s1">:</span><span class="s2">&quot;||&quot;</span><span class="s1">,c=</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="s1">==b?Blockly.JavaScript.ORDER_LOGICAL_AND:Blockly.JavaScript.ORDER_LOGICAL_OR,d=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;A&quot;</span><span class="s1">,c);a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;B&quot;</span><span class="s1">,c);</span><span class="s3">if</span><span class="s1">(d||a){</span><span class="s3">var </span><span class="s1">e=</span><span class="s2">&quot;&amp;&amp;&quot;</span><span class="s1">==b?</span><span class="s2">&quot;true&quot;</span><span class="s1">:</span><span class="s2">&quot;false&quot;</span><span class="s1">;d||(d=e);a||(a=e)}</span><span class="s3">else </span><span class="s1">a=d=</span><span class="s2">&quot;false&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[d+</span><span class="s2">&quot; &quot;</span><span class="s1">+b+</span><span class="s2">&quot; &quot;</span><span class="s1">+a,c]};</span>
<a name="l46"><span class="ln">46   </span></a><span class="s1">Blockly.JavaScript.logic_negate=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.ORDER_LOGICAL_NOT;</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;!&quot;</span><span class="s1">+(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;BOOL&quot;</span><span class="s1">,b)||</span><span class="s2">&quot;true&quot;</span><span class="s1">),b]};Blockly.JavaScript.logic_boolean=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;TRUE&quot;</span><span class="s1">==a.getFieldValue(</span><span class="s2">&quot;BOOL&quot;</span><span class="s1">)?</span><span class="s2">&quot;true&quot;</span><span class="s1">:</span><span class="s2">&quot;false&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.logic_null=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;null&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ATOMIC]};</span>
<a name="l47"><span class="ln">47   </span></a><span class="s1">Blockly.JavaScript.logic_ternary=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;IF&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_CONDITIONAL)||</span><span class="s2">&quot;false&quot;</span><span class="s1">,c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;THEN&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_CONDITIONAL)||</span><span class="s2">&quot;null&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;ELSE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_CONDITIONAL)||</span><span class="s2">&quot;null&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[b+</span><span class="s2">&quot; ? &quot;</span><span class="s1">+c+</span><span class="s2">&quot; : &quot;</span><span class="s1">+a,Blockly.JavaScript.ORDER_CONDITIONAL]};Blockly.JavaScript.loops={};</span>
<a name="l48"><span class="ln">48   </span></a><span class="s1">Blockly.JavaScript.controls_repeat_ext=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=a.getField(</span><span class="s2">&quot;TIMES&quot;</span><span class="s1">)?String(Number(a.getFieldValue(</span><span class="s2">&quot;TIMES&quot;</span><span class="s1">))):Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TIMES&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ASSIGNMENT)||</span><span class="s2">&quot;0&quot;</span><span class="s1">,c=Blockly.JavaScript.statementToCode(a,</span><span class="s2">&quot;DO&quot;</span><span class="s1">);c=Blockly.JavaScript.addLoopTrap(c,a);a=</span><span class="s2">&quot;&quot;</span><span class="s1">;</span><span class="s3">var </span><span class="s1">d=Blockly.JavaScript.variableDB_.getDistinctName(</span><span class="s2">&quot;count&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE),e=b;b.match(/^\w+$/)||Blockly.isNumber(b)||(e=Blockly.JavaScript.variableDB_.getDistinctName(</span><span class="s2">&quot;repeat_end&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE),</span>
<a name="l49"><span class="ln">49   </span></a><span class="s1">a+=</span><span class="s2">&quot;var &quot;</span><span class="s1">+e+</span><span class="s2">&quot; = &quot;</span><span class="s1">+b+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">);</span><span class="s3">return </span><span class="s1">a+(</span><span class="s2">&quot;for (var &quot;</span><span class="s1">+d+</span><span class="s2">&quot; = 0; &quot;</span><span class="s1">+d+</span><span class="s2">&quot; &lt; &quot;</span><span class="s1">+e+</span><span class="s2">&quot;; &quot;</span><span class="s1">+d+</span><span class="s2">&quot;++) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+c+</span><span class="s2">&quot;}</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">)};Blockly.JavaScript.controls_repeat=Blockly.JavaScript.controls_repeat_ext;</span>
<a name="l50"><span class="ln">50   </span></a><span class="s1">Blockly.JavaScript.controls_whileUntil=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=</span><span class="s2">&quot;UNTIL&quot;</span><span class="s1">==a.getFieldValue(</span><span class="s2">&quot;MODE&quot;</span><span class="s1">),c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;BOOL&quot;</span><span class="s1">,b?Blockly.JavaScript.ORDER_LOGICAL_NOT:Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;false&quot;</span><span class="s1">,d=Blockly.JavaScript.statementToCode(a,</span><span class="s2">&quot;DO&quot;</span><span class="s1">);d=Blockly.JavaScript.addLoopTrap(d,a);b&amp;&amp;(c=</span><span class="s2">&quot;!&quot;</span><span class="s1">+c);</span><span class="s3">return</span><span class="s2">&quot;while (&quot;</span><span class="s1">+c+</span><span class="s2">&quot;) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+d+</span><span class="s2">&quot;}</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};</span>
<a name="l51"><span class="ln">51   </span></a><span class="s1">Blockly.JavaScript.controls_for=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.variableDB_.getName(a.getFieldValue(</span><span class="s2">&quot;VAR&quot;</span><span class="s1">),Blockly.Variables.NAME_TYPE),c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;FROM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ASSIGNMENT)||</span><span class="s2">&quot;0&quot;</span><span class="s1">,d=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TO&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ASSIGNMENT)||</span><span class="s2">&quot;0&quot;</span><span class="s1">,e=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;BY&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ASSIGNMENT)||</span><span class="s2">&quot;1&quot;</span><span class="s1">,f=Blockly.JavaScript.statementToCode(a,</span><span class="s2">&quot;DO&quot;</span><span class="s1">);f=Blockly.JavaScript.addLoopTrap(f,a);</span><span class="s3">if</span><span class="s1">(Blockly.isNumber(c)&amp;&amp;Blockly.isNumber(d)&amp;&amp;</span>
<a name="l52"><span class="ln">52   </span></a><span class="s1">Blockly.isNumber(e)){</span><span class="s3">var </span><span class="s1">g=parseFloat(c)&lt;=parseFloat(d);a=</span><span class="s2">&quot;for (&quot;</span><span class="s1">+b+</span><span class="s2">&quot; = &quot;</span><span class="s1">+c+</span><span class="s2">&quot;; &quot;</span><span class="s1">+b+(g?</span><span class="s2">&quot; &lt;= &quot;</span><span class="s1">:</span><span class="s2">&quot; &gt;= &quot;</span><span class="s1">)+d+</span><span class="s2">&quot;; &quot;</span><span class="s1">+b;b=Math.abs(parseFloat(e));a=(</span><span class="s4">1</span><span class="s1">==b?a+(g?</span><span class="s2">&quot;++&quot;</span><span class="s1">:</span><span class="s2">&quot;--&quot;</span><span class="s1">):a+((g?</span><span class="s2">&quot; += &quot;</span><span class="s1">:</span><span class="s2">&quot; -= &quot;</span><span class="s1">)+b))+(</span><span class="s2">&quot;) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+f+</span><span class="s2">&quot;}</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">)}</span><span class="s3">else </span><span class="s1">a=</span><span class="s2">&quot;&quot;</span><span class="s1">,g=c,c.match(/^\w+$/)||Blockly.isNumber(c)||(g=Blockly.JavaScript.variableDB_.getDistinctName(b+</span><span class="s2">&quot;_start&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE),a+=</span><span class="s2">&quot;var &quot;</span><span class="s1">+g+</span><span class="s2">&quot; = &quot;</span><span class="s1">+c+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">),c=d,d.match(/^\w+$/)||Blockly.isNumber(d)||(c=Blockly.JavaScript.variableDB_.getDistinctName(b+</span><span class="s2">&quot;_end&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE),</span>
<a name="l53"><span class="ln">53   </span></a><span class="s1">a+=</span><span class="s2">&quot;var &quot;</span><span class="s1">+c+</span><span class="s2">&quot; = &quot;</span><span class="s1">+d+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">),d=Blockly.JavaScript.variableDB_.getDistinctName(b+</span><span class="s2">&quot;_inc&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE),a+=</span><span class="s2">&quot;var &quot;</span><span class="s1">+d+</span><span class="s2">&quot; = &quot;</span><span class="s1">,a=Blockly.isNumber(e)?a+(Math.abs(e)+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">):a+(</span><span class="s2">&quot;Math.abs(&quot;</span><span class="s1">+e+</span><span class="s2">&quot;);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">),a=a+(</span><span class="s2">&quot;if (&quot;</span><span class="s1">+g+</span><span class="s2">&quot; &gt; &quot;</span><span class="s1">+c+</span><span class="s2">&quot;) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">)+(Blockly.JavaScript.INDENT+d+</span><span class="s2">&quot; = -&quot;</span><span class="s1">+d+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">),a+=</span><span class="s2">&quot;}</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">,a+=</span><span class="s2">&quot;for (&quot;</span><span class="s1">+b+</span><span class="s2">&quot; = &quot;</span><span class="s1">+g+</span><span class="s2">&quot;; &quot;</span><span class="s1">+d+</span><span class="s2">&quot; &gt;= 0 ? &quot;</span><span class="s1">+b+</span><span class="s2">&quot; &lt;= &quot;</span><span class="s1">+c+</span><span class="s2">&quot; : &quot;</span><span class="s1">+b+</span><span class="s2">&quot; &gt;= &quot;</span><span class="s1">+c+</span><span class="s2">&quot;; &quot;</span><span class="s1">+b+</span><span class="s2">&quot; += &quot;</span><span class="s1">+d+</span><span class="s2">&quot;) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+f+</span><span class="s2">&quot;}</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">return </span><span class="s1">a};</span>
<a name="l54"><span class="ln">54   </span></a><span class="s1">Blockly.JavaScript.controls_forEach=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.variableDB_.getName(a.getFieldValue(</span><span class="s2">&quot;VAR&quot;</span><span class="s1">),Blockly.Variables.NAME_TYPE),c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ASSIGNMENT)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">,d=Blockly.JavaScript.statementToCode(a,</span><span class="s2">&quot;DO&quot;</span><span class="s1">);d=Blockly.JavaScript.addLoopTrap(d,a);a=</span><span class="s2">&quot;&quot;</span><span class="s1">;</span><span class="s3">var </span><span class="s1">e=c;c.match(/^\w+$/)||(e=Blockly.JavaScript.variableDB_.getDistinctName(b+</span><span class="s2">&quot;_list&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE),a+=</span><span class="s2">&quot;var &quot;</span><span class="s1">+e+</span><span class="s2">&quot; = &quot;</span><span class="s1">+c+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">);c=Blockly.JavaScript.variableDB_.getDistinctName(b+</span>
<a name="l55"><span class="ln">55   </span></a><span class="s2">&quot;_index&quot;</span><span class="s1">,Blockly.Variables.NAME_TYPE);d=Blockly.JavaScript.INDENT+b+</span><span class="s2">&quot; = &quot;</span><span class="s1">+e+</span><span class="s2">&quot;[&quot;</span><span class="s1">+c+</span><span class="s2">&quot;];</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+d;</span><span class="s3">return </span><span class="s1">a+(</span><span class="s2">&quot;for (var &quot;</span><span class="s1">+c+</span><span class="s2">&quot; in &quot;</span><span class="s1">+e+</span><span class="s2">&quot;) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+d+</span><span class="s2">&quot;}</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">)};</span>
<a name="l56"><span class="ln">56   </span></a><span class="s1">Blockly.JavaScript.controls_flow_statements=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=</span><span class="s2">&quot;&quot;</span><span class="s1">;Blockly.JavaScript.STATEMENT_PREFIX&amp;&amp;(b+=Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,a));Blockly.JavaScript.STATEMENT_SUFFIX&amp;&amp;(b+=Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,a));</span><span class="s3">if</span><span class="s1">(Blockly.JavaScript.STATEMENT_PREFIX){</span><span class="s3">var </span><span class="s1">c=Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(a);c&amp;&amp;!c.suppressPrefixSuffix&amp;&amp;(b+=Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,</span>
<a name="l57"><span class="ln">57   </span></a><span class="s1">c))}</span><span class="s3">switch</span><span class="s1">(a.getFieldValue(</span><span class="s2">&quot;FLOW&quot;</span><span class="s1">)){</span><span class="s3">case </span><span class="s2">&quot;BREAK&quot;</span><span class="s1">:</span><span class="s3">return </span><span class="s1">b+</span><span class="s2">&quot;break;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;CONTINUE&quot;</span><span class="s1">:</span><span class="s3">return </span><span class="s1">b+</span><span class="s2">&quot;continue;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">}</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unknown flow statement.&quot;</span><span class="s1">);};Blockly.JavaScript.math={};Blockly.JavaScript.math_number=</span><span class="s3">function</span><span class="s1">(a){a=parseFloat(a.getFieldValue(</span><span class="s2">&quot;NUM&quot;</span><span class="s1">));</span><span class="s3">return</span><span class="s1">[a,</span><span class="s4">0</span><span class="s1">&lt;=a?Blockly.JavaScript.ORDER_ATOMIC:Blockly.JavaScript.ORDER_UNARY_NEGATION]};</span>
<a name="l58"><span class="ln">58   </span></a><span class="s1">Blockly.JavaScript.math_arithmetic=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b={ADD:[</span><span class="s2">&quot; + &quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ADDITION],MINUS:[</span><span class="s2">&quot; - &quot;</span><span class="s1">,Blockly.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[</span><span class="s2">&quot; * &quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[</span><span class="s2">&quot; / &quot;</span><span class="s1">,Blockly.JavaScript.ORDER_DIVISION],POWER:[</span><span class="s3">null</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA]}[a.getFieldValue(</span><span class="s2">&quot;OP&quot;</span><span class="s1">)],c=b[</span><span class="s4">0</span><span class="s1">];b=b[</span><span class="s4">1</span><span class="s1">];</span><span class="s3">var </span><span class="s1">d=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;A&quot;</span><span class="s1">,b)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;B&quot;</span><span class="s1">,b)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">return </span><span class="s1">c?[d+c+a,b]:[</span><span class="s2">&quot;Math.pow(&quot;</span><span class="s1">+d+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l59"><span class="ln">59   </span></a><span class="s1">Blockly.JavaScript.math_single=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=a.getFieldValue(</span><span class="s2">&quot;OP&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;NEG&quot;</span><span class="s1">==b)</span><span class="s3">return </span><span class="s1">a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;NUM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_UNARY_NEGATION)||</span><span class="s2">&quot;0&quot;</span><span class="s1">,</span><span class="s2">&quot;-&quot;</span><span class="s1">==a[</span><span class="s4">0</span><span class="s1">]&amp;&amp;(a=</span><span class="s2">&quot; &quot;</span><span class="s1">+a),[</span><span class="s2">&quot;-&quot;</span><span class="s1">+a,Blockly.JavaScript.ORDER_UNARY_NEGATION];a=</span><span class="s2">&quot;SIN&quot;</span><span class="s1">==b||</span><span class="s2">&quot;COS&quot;</span><span class="s1">==b||</span><span class="s2">&quot;TAN&quot;</span><span class="s1">==b?Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;NUM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_DIVISION)||</span><span class="s2">&quot;0&quot;</span><span class="s1">:Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;NUM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">switch</span><span class="s1">(b){</span><span class="s3">case </span><span class="s2">&quot;ABS&quot;</span><span class="s1">:</span><span class="s3">var </span><span class="s1">c=</span><span class="s2">&quot;Math.abs(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;ROOT&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.sqrt(&quot;</span><span class="s1">+</span>
<a name="l60"><span class="ln">60   </span></a><span class="s1">a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;LN&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.log(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;EXP&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.exp(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;POW10&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.pow(10,&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;ROUND&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.round(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;ROUNDUP&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.ceil(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;ROUNDDOWN&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.floor(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;SIN&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.sin(&quot;</span><span class="s1">+a+</span><span class="s2">&quot; / 180 * Math.PI)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;COS&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.cos(&quot;</span><span class="s1">+a+</span><span class="s2">&quot; / 180 * Math.PI)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;TAN&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.tan(&quot;</span><span class="s1">+a+</span><span class="s2">&quot; / 180 * Math.PI)&quot;</span><span class="s1">}</span><span class="s3">if</span><span class="s1">(c)</span><span class="s3">return</span><span class="s1">[c,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">switch</span><span class="s1">(b){</span><span class="s3">case </span><span class="s2">&quot;LOG10&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.log(&quot;</span><span class="s1">+a+</span>
<a name="l61"><span class="ln">61   </span></a><span class="s2">&quot;) / Math.log(10)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;ASIN&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.asin(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;) / Math.PI * 180&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;ACOS&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.acos(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;) / Math.PI * 180&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;ATAN&quot;</span><span class="s1">:c=</span><span class="s2">&quot;Math.atan(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;) / Math.PI * 180&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">default</span><span class="s1">:</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unknown math operator: &quot;</span><span class="s1">+b);}</span><span class="s3">return</span><span class="s1">[c,Blockly.JavaScript.ORDER_DIVISION]};</span>
<a name="l62"><span class="ln">62   </span></a><span class="s1">Blockly.JavaScript.math_constant=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">{PI:[</span><span class="s2">&quot;Math.PI&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER],E:[</span><span class="s2">&quot;Math.E&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:[</span><span class="s2">&quot;(1 + Math.sqrt(5)) / 2&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_DIVISION],SQRT2:[</span><span class="s2">&quot;Math.SQRT2&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER],SQRT1_2:[</span><span class="s2">&quot;Math.SQRT1_2&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER],INFINITY:[</span><span class="s2">&quot;Infinity&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ATOMIC]}[a.getFieldValue(</span><span class="s2">&quot;CONSTANT&quot;</span><span class="s1">)]};</span>
<a name="l63"><span class="ln">63   </span></a><span class="s1">Blockly.JavaScript.math_number_property=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;NUMBER_TO_CHECK&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MODULUS)||</span><span class="s2">&quot;0&quot;</span><span class="s1">,c=a.getFieldValue(</span><span class="s2">&quot;PROPERTY&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;PRIME&quot;</span><span class="s1">==c)</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;mathIsPrime&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(n) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods&quot;</span><span class="s1">,</span><span class="s2">&quot;  if (n == 2 || n == 3) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    return true;&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;  // False if n is NaN, negative, is 1, or not whole.&quot;</span><span class="s1">,</span><span class="s2">&quot;  // And false if n is divisible by 2 or 3.&quot;</span><span class="s1">,</span>
<a name="l64"><span class="ln">64   </span></a><span class="s2">&quot;  if (isNaN(n) || n &lt;= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    return false;&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;  // Check all the numbers of form 6k +/- 1, up to sqrt(n).&quot;</span><span class="s1">,</span><span class="s2">&quot;  for (var x = 6; x &lt;= Math.sqrt(n) + 1; x += 6) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    if (n % (x - 1) == 0 || n % (x + 1) == 0) {&quot;</span><span class="s1">,</span><span class="s2">&quot;      return false;&quot;</span><span class="s1">,</span><span class="s2">&quot;    }&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;  return true;&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+b+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">switch</span><span class="s1">(c){</span><span class="s3">case </span><span class="s2">&quot;EVEN&quot;</span><span class="s1">:</span><span class="s3">var </span><span class="s1">d=b+</span><span class="s2">&quot; % 2 == 0&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;ODD&quot;</span><span class="s1">:d=b+</span><span class="s2">&quot; % 2 == 1&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;WHOLE&quot;</span><span class="s1">:d=b+</span><span class="s2">&quot; % 1 == 0&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;POSITIVE&quot;</span><span class="s1">:d=</span>
<a name="l65"><span class="ln">65   </span></a><span class="s1">b+</span><span class="s2">&quot; &gt; 0&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;NEGATIVE&quot;</span><span class="s1">:d=b+</span><span class="s2">&quot; &lt; 0&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;DIVISIBLE_BY&quot;</span><span class="s1">:a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;DIVISOR&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MODULUS)||</span><span class="s2">&quot;0&quot;</span><span class="s1">,d=b+</span><span class="s2">&quot; % &quot;</span><span class="s1">+a+</span><span class="s2">&quot; == 0&quot;</span><span class="s1">}</span><span class="s3">return</span><span class="s1">[d,Blockly.JavaScript.ORDER_EQUALITY]};Blockly.JavaScript.math_change=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;DELTA&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ADDITION)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;a=Blockly.JavaScript.variableDB_.getName(a.getFieldValue(</span><span class="s2">&quot;VAR&quot;</span><span class="s1">),Blockly.Variables.NAME_TYPE);</span><span class="s3">return </span><span class="s1">a+</span><span class="s2">&quot; = (typeof &quot;</span><span class="s1">+a+</span><span class="s2">&quot; == 'number' ? &quot;</span><span class="s1">+a+</span><span class="s2">&quot; : 0) + &quot;</span><span class="s1">+b+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};</span>
<a name="l66"><span class="ln">66   </span></a><span class="s1">Blockly.JavaScript.math_round=Blockly.JavaScript.math_single;Blockly.JavaScript.math_trig=Blockly.JavaScript.math_single;</span>
<a name="l67"><span class="ln">67   </span></a><span class="s1">Blockly.JavaScript.math_on_list=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=a.getFieldValue(</span><span class="s2">&quot;OP&quot;</span><span class="s1">);</span><span class="s3">switch</span><span class="s1">(b){</span><span class="s3">case </span><span class="s2">&quot;SUM&quot;</span><span class="s1">:a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;a+=</span><span class="s2">&quot;.reduce(function(x, y) {return x + y;})&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;MIN&quot;</span><span class="s1">:a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;a=</span><span class="s2">&quot;Math.min.apply(null, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;MAX&quot;</span><span class="s1">:a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;a=</span><span class="s2">&quot;Math.max.apply(null, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;AVERAGE&quot;</span><span class="s1">:b=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;mathMean&quot;</span><span class="s1">,</span>
<a name="l68"><span class="ln">68   </span></a><span class="s1">[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(myList) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  return myList.reduce(function(x, y) {return x + y;}) / myList.length;&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">]);a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;a=b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;MEDIAN&quot;</span><span class="s1">:b=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;mathMedian&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(myList) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var localList = myList.filter(function (x) {return typeof x == 'number';});&quot;</span><span class="s1">,</span><span class="s2">&quot;  if (!localList.length) return null;&quot;</span><span class="s1">,</span>
<a name="l69"><span class="ln">69   </span></a><span class="s2">&quot;  localList.sort(function(a, b) {return b - a;});&quot;</span><span class="s1">,</span><span class="s2">&quot;  if (localList.length % 2 == 0) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;&quot;</span><span class="s1">,</span><span class="s2">&quot;  } else {&quot;</span><span class="s1">,</span><span class="s2">&quot;    return localList[(localList.length - 1) / 2];&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">]);a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;a=b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;MODE&quot;</span><span class="s1">:b=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;mathModes&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(values) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var modes = [];&quot;</span><span class="s1">,</span>
<a name="l70"><span class="ln">70   </span></a><span class="s2">&quot;  var counts = [];&quot;</span><span class="s1">,</span><span class="s2">&quot;  var maxCount = 0;&quot;</span><span class="s1">,</span><span class="s2">&quot;  for (var i = 0; i &lt; values.length; i++) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    var value = values[i];&quot;</span><span class="s1">,</span><span class="s2">&quot;    var found = false;&quot;</span><span class="s1">,</span><span class="s2">&quot;    var thisCount;&quot;</span><span class="s1">,</span><span class="s2">&quot;    for (var j = 0; j &lt; counts.length; j++) {&quot;</span><span class="s1">,</span><span class="s2">&quot;      if (counts[j][0] === value) {&quot;</span><span class="s1">,</span><span class="s2">&quot;        thisCount = ++counts[j][1];&quot;</span><span class="s1">,</span><span class="s2">&quot;        found = true;&quot;</span><span class="s1">,</span><span class="s2">&quot;        break;&quot;</span><span class="s1">,</span><span class="s2">&quot;      }&quot;</span><span class="s1">,</span><span class="s2">&quot;    }&quot;</span><span class="s1">,</span><span class="s2">&quot;    if (!found) {&quot;</span><span class="s1">,</span><span class="s2">&quot;      counts.push([value, 1]);&quot;</span><span class="s1">,</span><span class="s2">&quot;      thisCount = 1;&quot;</span><span class="s1">,</span><span class="s2">&quot;    }&quot;</span><span class="s1">,</span><span class="s2">&quot;    maxCount = Math.max(thisCount, maxCount);&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;  for (var j = 0; j &lt; counts.length; j++) {&quot;</span><span class="s1">,</span>
<a name="l71"><span class="ln">71   </span></a><span class="s2">&quot;    if (counts[j][1] == maxCount) {&quot;</span><span class="s1">,</span><span class="s2">&quot;        modes.push(counts[j][0]);&quot;</span><span class="s1">,</span><span class="s2">&quot;    }&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;  return modes;&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">]);a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;a=b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;STD_DEV&quot;</span><span class="s1">:b=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;mathStandardDeviation&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(numbers) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var n = numbers.length;&quot;</span><span class="s1">,</span><span class="s2">&quot;  if (!n) return null;&quot;</span><span class="s1">,</span><span class="s2">&quot;  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;&quot;</span><span class="s1">,</span><span class="s2">&quot;  var variance = 0;&quot;</span><span class="s1">,</span>
<a name="l72"><span class="ln">72   </span></a><span class="s2">&quot;  for (var j = 0; j &lt; n; j++) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    variance += Math.pow(numbers[j] - mean, 2);&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;  variance = variance / n;&quot;</span><span class="s1">,</span><span class="s2">&quot;  return Math.sqrt(variance);&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">]);a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;a=b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;RANDOM&quot;</span><span class="s1">:b=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;mathRandomList&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(list) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var x = Math.floor(Math.random() * list.length);&quot;</span><span class="s1">,</span><span class="s2">&quot;  return list[x];&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">]);a=Blockly.JavaScript.valueToCode(a,</span>
<a name="l73"><span class="ln">73   </span></a><span class="s2">&quot;LIST&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;[]&quot;</span><span class="s1">;a=b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">default</span><span class="s1">:</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unknown operator: &quot;</span><span class="s1">+b);}</span><span class="s3">return</span><span class="s1">[a,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.math_modulo=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;DIVIDEND&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MODULUS)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;DIVISOR&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MODULUS)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[b+</span><span class="s2">&quot; % &quot;</span><span class="s1">+a,Blockly.JavaScript.ORDER_MODULUS]};</span>
<a name="l74"><span class="ln">74   </span></a><span class="s1">Blockly.JavaScript.math_constrain=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;0&quot;</span><span class="s1">,c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;LOW&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;HIGH&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;Infinity&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;Math.min(Math.max(&quot;</span><span class="s1">+b+</span><span class="s2">&quot;, &quot;</span><span class="s1">+c+</span><span class="s2">&quot;), &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l75"><span class="ln">75   </span></a><span class="s1">Blockly.JavaScript.math_random_int=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;FROM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TO&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;mathRandomInt&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(a, b) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  if (a &gt; b) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    // Swap a and b to ensure a is smaller.&quot;</span><span class="s1">,</span><span class="s2">&quot;    var c = a;&quot;</span><span class="s1">,</span><span class="s2">&quot;    a = b;&quot;</span><span class="s1">,</span><span class="s2">&quot;    b = c;&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;  return Math.floor(Math.random() * (b - a + 1) + a);&quot;</span><span class="s1">,</span>
<a name="l76"><span class="ln">76   </span></a><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+b+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.math_random_float=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;Math.random()&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.math_atan2=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;X&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;Math.atan2(&quot;</span><span class="s1">+(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;Y&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;0&quot;</span><span class="s1">)+</span><span class="s2">&quot;, &quot;</span><span class="s1">+b+</span><span class="s2">&quot;) / Math.PI * 180&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_DIVISION]};Blockly.JavaScript.procedures={};</span>
<a name="l77"><span class="ln">77   </span></a><span class="s1">Blockly.JavaScript.procedures_defreturn=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.variableDB_.getName(a.getFieldValue(</span><span class="s2">&quot;NAME&quot;</span><span class="s1">),Blockly.Procedures.NAME_TYPE),c=</span><span class="s2">&quot;&quot;</span><span class="s1">;Blockly.JavaScript.STATEMENT_PREFIX&amp;&amp;(c+=Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_PREFIX,a));Blockly.JavaScript.STATEMENT_SUFFIX&amp;&amp;(c+=Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,a));c&amp;&amp;(c=Blockly.JavaScript.prefixLines(c,Blockly.JavaScript.INDENT));</span><span class="s3">var </span><span class="s1">d=</span><span class="s2">&quot;&quot;</span><span class="s1">;Blockly.JavaScript.INFINITE_LOOP_TRAP&amp;&amp;(d=Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.INFINITE_LOOP_TRAP,</span>
<a name="l78"><span class="ln">78   </span></a><span class="s1">a),Blockly.JavaScript.INDENT));</span><span class="s3">var </span><span class="s1">e=Blockly.JavaScript.statementToCode(a,</span><span class="s2">&quot;STACK&quot;</span><span class="s1">),f=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;RETURN&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;&quot;</span><span class="s1">,g=</span><span class="s2">&quot;&quot;</span><span class="s1">;e&amp;&amp;f&amp;&amp;(g=c);f&amp;&amp;(f=Blockly.JavaScript.INDENT+</span><span class="s2">&quot;return &quot;</span><span class="s1">+f+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">);</span><span class="s3">for</span><span class="s1">(</span><span class="s3">var </span><span class="s1">k=[],h=</span><span class="s4">0</span><span class="s1">;h&lt;a.arguments_.length;h++)k[h]=Blockly.JavaScript.variableDB_.getName(a.arguments_[h],Blockly.Variables.NAME_TYPE);c=</span><span class="s2">&quot;function &quot;</span><span class="s1">+b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+k.join(</span><span class="s2">&quot;, &quot;</span><span class="s1">)+</span><span class="s2">&quot;) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">+c+d+e+g+f+</span><span class="s2">&quot;}&quot;</span><span class="s1">;c=Blockly.JavaScript.scrub_(a,c);Blockly.JavaScript.definitions_[</span><span class="s2">&quot;%&quot;</span><span class="s1">+b]=c;</span><span class="s3">return null</span><span class="s1">};</span>
<a name="l79"><span class="ln">79   </span></a><span class="s1">Blockly.JavaScript.procedures_defnoreturn=Blockly.JavaScript.procedures_defreturn;Blockly.JavaScript.procedures_callreturn=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">for</span><span class="s1">(</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.variableDB_.getName(a.getFieldValue(</span><span class="s2">&quot;NAME&quot;</span><span class="s1">),Blockly.Procedures.NAME_TYPE),c=[],d=</span><span class="s4">0</span><span class="s1">;d&lt;a.arguments_.length;d++)c[d]=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;ARG&quot;</span><span class="s1">+d,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;null&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+c.join(</span><span class="s2">&quot;, &quot;</span><span class="s1">)+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l80"><span class="ln">80   </span></a><span class="s1">Blockly.JavaScript.procedures_callnoreturn=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return </span><span class="s1">Blockly.JavaScript.procedures_callreturn(a)[</span><span class="s4">0</span><span class="s1">]+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};</span>
<a name="l81"><span class="ln">81   </span></a><span class="s1">Blockly.JavaScript.procedures_ifreturn=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=</span><span class="s2">&quot;if (&quot;</span><span class="s1">+(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;CONDITION&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;false&quot;</span><span class="s1">)+</span><span class="s2">&quot;) {</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;Blockly.JavaScript.STATEMENT_SUFFIX&amp;&amp;(b+=Blockly.JavaScript.prefixLines(Blockly.JavaScript.injectId(Blockly.JavaScript.STATEMENT_SUFFIX,a),Blockly.JavaScript.INDENT));a.hasReturnValue_?(a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;null&quot;</span><span class="s1">,b+=Blockly.JavaScript.INDENT+</span><span class="s2">&quot;return &quot;</span><span class="s1">+a+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">):b+=Blockly.JavaScript.INDENT+</span>
<a name="l82"><span class="ln">82   </span></a><span class="s2">&quot;return;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">;</span><span class="s3">return </span><span class="s1">b+</span><span class="s2">&quot;}</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};Blockly.JavaScript.texts={};Blockly.JavaScript.text=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.quote_(a.getFieldValue(</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">)),Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.text.forceString_=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return </span><span class="s1">Blockly.JavaScript.text.forceString_.strRegExp.test(a)?a:</span><span class="s2">&quot;String(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">};Blockly.JavaScript.text.forceString_.strRegExp=/^\s*</span><span class="s2">'([^'</span><span class="s1">]|\\</span><span class="s2">')*'</span><span class="s1">\s*$/;</span>
<a name="l83"><span class="ln">83   </span></a><span class="s1">Blockly.JavaScript.text_join=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">switch</span><span class="s1">(a.itemCount_){</span><span class="s3">case </span><span class="s4">0</span><span class="s1">:</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;''&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ATOMIC];</span><span class="s3">case </span><span class="s4">1</span><span class="s1">:</span><span class="s3">return </span><span class="s1">a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;ADD0&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">,a=Blockly.JavaScript.text.forceString_(a),[a,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">case </span><span class="s4">2</span><span class="s1">:</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;ADD0&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;ADD1&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;a=Blockly.JavaScript.text.forceString_(b)+</span>
<a name="l84"><span class="ln">84   </span></a><span class="s2">&quot; + &quot;</span><span class="s1">+Blockly.JavaScript.text.forceString_(a);</span><span class="s3">return</span><span class="s1">[a,Blockly.JavaScript.ORDER_ADDITION];</span><span class="s3">default</span><span class="s1">:b=Array(a.itemCount_);</span><span class="s3">for</span><span class="s1">(</span><span class="s3">var </span><span class="s1">c=</span><span class="s4">0</span><span class="s1">;c&lt;a.itemCount_;c++)b[c]=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;ADD&quot;</span><span class="s1">+c,Blockly.JavaScript.ORDER_COMMA)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;a=</span><span class="s2">&quot;[&quot;</span><span class="s1">+b.join(</span><span class="s2">&quot;,&quot;</span><span class="s1">)+</span><span class="s2">&quot;].join('')&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[a,Blockly.JavaScript.ORDER_FUNCTION_CALL]}};</span>
<a name="l85"><span class="ln">85   </span></a><span class="s1">Blockly.JavaScript.text_append=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.variableDB_.getName(a.getFieldValue(</span><span class="s2">&quot;VAR&quot;</span><span class="s1">),Blockly.Variables.NAME_TYPE);a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;</span><span class="s3">return </span><span class="s1">b+</span><span class="s2">&quot; += &quot;</span><span class="s1">+Blockly.JavaScript.text.forceString_(a)+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};Blockly.JavaScript.text_length=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL)||</span><span class="s2">&quot;''&quot;</span><span class="s1">)+</span><span class="s2">&quot;.length&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER]};</span>
<a name="l86"><span class="ln">86   </span></a><span class="s1">Blockly.JavaScript.text_isEmpty=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[</span><span class="s2">&quot;!&quot;</span><span class="s1">+(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;''&quot;</span><span class="s1">)+</span><span class="s2">&quot;.length&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_LOGICAL_NOT]};</span>
<a name="l87"><span class="ln">87   </span></a><span class="s1">Blockly.JavaScript.text_indexOf=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=</span><span class="s2">&quot;FIRST&quot;</span><span class="s1">==a.getFieldValue(</span><span class="s2">&quot;END&quot;</span><span class="s1">)?</span><span class="s2">&quot;indexOf&quot;</span><span class="s1">:</span><span class="s2">&quot;lastIndexOf&quot;</span><span class="s1">,c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;FIND&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;b=(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;''&quot;</span><span class="s1">)+</span><span class="s2">&quot;.&quot;</span><span class="s1">+b+</span><span class="s2">&quot;(&quot;</span><span class="s1">+c+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s3">return </span><span class="s1">a.workspace.options.oneBasedIndex?[b+</span><span class="s2">&quot; + 1&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ADDITION]:[b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l88"><span class="ln">88   </span></a><span class="s1">Blockly.JavaScript.text_charAt=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=a.getFieldValue(</span><span class="s2">&quot;WHERE&quot;</span><span class="s1">)||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">,c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,</span><span class="s2">&quot;RANDOM&quot;</span><span class="s1">==b?Blockly.JavaScript.ORDER_NONE:Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;</span><span class="s3">switch</span><span class="s1">(b){</span><span class="s3">case </span><span class="s2">&quot;FIRST&quot;</span><span class="s1">:</span><span class="s3">return</span><span class="s1">[c+</span><span class="s2">&quot;.charAt(0)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">case </span><span class="s2">&quot;LAST&quot;</span><span class="s1">:</span><span class="s3">return</span><span class="s1">[c+</span><span class="s2">&quot;.slice(-1)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">case </span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">:</span><span class="s3">return </span><span class="s1">a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT&quot;</span><span class="s1">),[c+</span><span class="s2">&quot;.charAt(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">case </span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">:</span><span class="s3">return </span><span class="s1">a=</span>
<a name="l89"><span class="ln">89   </span></a><span class="s1">Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT&quot;</span><span class="s1">,</span><span class="s4">1</span><span class="s1">,!</span><span class="s4">0</span><span class="s1">),[c+</span><span class="s2">&quot;.slice(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;).charAt(0)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL];</span><span class="s3">case </span><span class="s2">&quot;RANDOM&quot;</span><span class="s1">:</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;textRandomLetter&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(text) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var x = Math.floor(Math.random() * text.length);&quot;</span><span class="s1">,</span><span class="s2">&quot;  return text[x];&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+c+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]}</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unhandled option (text_charAt).&quot;</span><span class="s1">);};</span>
<a name="l90"><span class="ln">90   </span></a><span class="s1">Blockly.JavaScript.text.getIndex_=</span><span class="s3">function</span><span class="s1">(a,b,c){</span><span class="s3">return</span><span class="s2">&quot;FIRST&quot;</span><span class="s1">==b?</span><span class="s2">&quot;0&quot;</span><span class="s1">:</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==b?a+</span><span class="s2">&quot;.length - 1 - &quot;</span><span class="s1">+c:</span><span class="s2">&quot;LAST&quot;</span><span class="s1">==b?a+</span><span class="s2">&quot;.length - 1&quot;</span><span class="s1">:c};</span>
<a name="l91"><span class="ln">91   </span></a><span class="s1">Blockly.JavaScript.text_getSubstring=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;STRING&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL)||</span><span class="s2">&quot;''&quot;</span><span class="s1">,c=a.getFieldValue(</span><span class="s2">&quot;WHERE1&quot;</span><span class="s1">),d=a.getFieldValue(</span><span class="s2">&quot;WHERE2&quot;</span><span class="s1">);</span><span class="s3">if</span><span class="s1">(</span><span class="s2">&quot;FIRST&quot;</span><span class="s1">!=c||</span><span class="s2">&quot;LAST&quot;</span><span class="s1">!=d)</span><span class="s3">if</span><span class="s1">(b.match(/^</span><span class="s2">'?</span><span class="s6">\w</span><span class="s2">+'</span><span class="s1">?$/)||</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">!=c&amp;&amp;</span><span class="s2">&quot;LAST&quot;</span><span class="s1">!=c&amp;&amp;</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">!=d&amp;&amp;</span><span class="s2">&quot;LAST&quot;</span><span class="s1">!=d){</span><span class="s3">switch</span><span class="s1">(c){</span><span class="s3">case </span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">:</span><span class="s3">var </span><span class="s1">e=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT1&quot;</span><span class="s1">);</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">:e=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT1&quot;</span><span class="s1">,</span><span class="s4">1</span><span class="s1">,!</span><span class="s4">1</span><span class="s1">,Blockly.JavaScript.ORDER_SUBTRACTION);e=b+</span><span class="s2">&quot;.length - &quot;</span><span class="s1">+e;</span><span class="s3">break</span><span class="s1">;</span>
<a name="l92"><span class="ln">92   </span></a><span class="s3">case </span><span class="s2">&quot;FIRST&quot;</span><span class="s1">:e=</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">default</span><span class="s1">:</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unhandled option (text_getSubstring).&quot;</span><span class="s1">);}</span><span class="s3">switch</span><span class="s1">(d){</span><span class="s3">case </span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">:a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT2&quot;</span><span class="s1">,</span><span class="s4">1</span><span class="s1">);</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">:a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT2&quot;</span><span class="s1">,</span><span class="s4">0</span><span class="s1">,!</span><span class="s4">1</span><span class="s1">,Blockly.JavaScript.ORDER_SUBTRACTION);a=b+</span><span class="s2">&quot;.length - &quot;</span><span class="s1">+a;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">case </span><span class="s2">&quot;LAST&quot;</span><span class="s1">:a=b+</span><span class="s2">&quot;.length&quot;</span><span class="s1">;</span><span class="s3">break</span><span class="s1">;</span><span class="s3">default</span><span class="s1">:</span><span class="s3">throw </span><span class="s1">Error(</span><span class="s2">&quot;Unhandled option (text_getSubstring).&quot;</span><span class="s1">);}b=b+</span><span class="s2">&quot;.slice(&quot;</span><span class="s1">+e+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">}</span><span class="s3">else</span><span class="s1">{e=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT1&quot;</span><span class="s1">);a=Blockly.JavaScript.getAdjusted(a,</span><span class="s2">&quot;AT2&quot;</span><span class="s1">);</span><span class="s3">var </span><span class="s1">f=</span>
<a name="l93"><span class="ln">93   </span></a><span class="s1">Blockly.JavaScript.text.getIndex_,g={FIRST:</span><span class="s2">&quot;First&quot;</span><span class="s1">,LAST:</span><span class="s2">&quot;Last&quot;</span><span class="s1">,FROM_START:</span><span class="s2">&quot;FromStart&quot;</span><span class="s1">,FROM_END:</span><span class="s2">&quot;FromEnd&quot;</span><span class="s1">};b=Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;subsequence&quot;</span><span class="s1">+g[c]+g[d],[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(sequence&quot;</span><span class="s1">+(</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==c||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==c?</span><span class="s2">&quot;, at1&quot;</span><span class="s1">:</span><span class="s2">&quot;&quot;</span><span class="s1">)+(</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==d||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==d?</span><span class="s2">&quot;, at2&quot;</span><span class="s1">:</span><span class="s2">&quot;&quot;</span><span class="s1">)+</span><span class="s2">&quot;) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  var start = &quot;</span><span class="s1">+f(</span><span class="s2">&quot;sequence&quot;</span><span class="s1">,c,</span><span class="s2">&quot;at1&quot;</span><span class="s1">)+</span><span class="s2">&quot;;&quot;</span><span class="s1">,</span><span class="s2">&quot;  var end = &quot;</span><span class="s1">+f(</span><span class="s2">&quot;sequence&quot;</span><span class="s1">,d,</span><span class="s2">&quot;at2&quot;</span><span class="s1">)+</span><span class="s2">&quot; + 1;&quot;</span><span class="s1">,</span><span class="s2">&quot;  return sequence.slice(start, end);&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+b+(</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==c||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==</span>
<a name="l94"><span class="ln">94   </span></a><span class="s1">c?</span><span class="s2">&quot;, &quot;</span><span class="s1">+e:</span><span class="s2">&quot;&quot;</span><span class="s1">)+(</span><span class="s2">&quot;FROM_END&quot;</span><span class="s1">==d||</span><span class="s2">&quot;FROM_START&quot;</span><span class="s1">==d?</span><span class="s2">&quot;, &quot;</span><span class="s1">+a:</span><span class="s2">&quot;&quot;</span><span class="s1">)+</span><span class="s2">&quot;)&quot;</span><span class="s1">}</span><span class="s3">return</span><span class="s1">[b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};</span>
<a name="l95"><span class="ln">95   </span></a><span class="s1">Blockly.JavaScript.text_changeCase=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b={UPPERCASE:</span><span class="s2">&quot;.toUpperCase()&quot;</span><span class="s1">,LOWERCASE:</span><span class="s2">&quot;.toLowerCase()&quot;</span><span class="s1">,TITLECASE:</span><span class="s3">null</span><span class="s1">}[a.getFieldValue(</span><span class="s2">&quot;CASE&quot;</span><span class="s1">)];a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">,b?Blockly.JavaScript.ORDER_MEMBER:Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[b?a+b:Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;textToTitleCase&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(str) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  return str.replace(/</span><span class="s5">\\</span><span class="s2">S+/g,&quot;</span><span class="s1">,</span><span class="s2">&quot;      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});&quot;</span><span class="s1">,</span>
<a name="l96"><span class="ln">96   </span></a><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_trim=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b={LEFT:</span><span class="s2">&quot;.replace(/^[</span><span class="s5">\\</span><span class="s2">s</span><span class="s5">\\</span><span class="s2">xa0]+/, '')&quot;</span><span class="s1">,RIGHT:</span><span class="s2">&quot;.replace(/[</span><span class="s5">\\</span><span class="s2">s</span><span class="s5">\\</span><span class="s2">xa0]+$/, '')&quot;</span><span class="s1">,BOTH:</span><span class="s2">&quot;.trim()&quot;</span><span class="s1">}[a.getFieldValue(</span><span class="s2">&quot;MODE&quot;</span><span class="s1">)];</span><span class="s3">return</span><span class="s1">[(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;''&quot;</span><span class="s1">)+b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_print=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s2">&quot;window.alert(&quot;</span><span class="s1">+(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">)+</span><span class="s2">&quot;);</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};</span>
<a name="l97"><span class="ln">97   </span></a><span class="s1">Blockly.JavaScript.text_prompt_ext=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=</span><span class="s2">&quot;window.prompt(&quot;</span><span class="s1">+(a.getField(</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">)?Blockly.JavaScript.quote_(a.getFieldValue(</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">)):Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">)+</span><span class="s2">&quot;)&quot;</span><span class="s1">;</span><span class="s2">&quot;NUMBER&quot;</span><span class="s1">==a.getFieldValue(</span><span class="s2">&quot;TYPE&quot;</span><span class="s1">)&amp;&amp;(b=</span><span class="s2">&quot;parseFloat(&quot;</span><span class="s1">+b+</span><span class="s2">&quot;)&quot;</span><span class="s1">);</span><span class="s3">return</span><span class="s1">[b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_prompt=Blockly.JavaScript.text_prompt_ext;</span>
<a name="l98"><span class="ln">98   </span></a><span class="s1">Blockly.JavaScript.text_count=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;SUB&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;textCount&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(haystack, needle) {&quot;</span><span class="s1">,</span><span class="s2">&quot;  if (needle.length === 0) {&quot;</span><span class="s1">,</span><span class="s2">&quot;    return haystack.length + 1;&quot;</span><span class="s1">,</span><span class="s2">&quot;  } else {&quot;</span><span class="s1">,</span><span class="s2">&quot;    return haystack.split(needle).length - 1;&quot;</span><span class="s1">,</span><span class="s2">&quot;  }&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+b+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_SUBTRACTION]};</span>
<a name="l99"><span class="ln">99   </span></a><span class="s1">Blockly.JavaScript.text_replace=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;''&quot;</span><span class="s1">,c=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;FROM&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;a=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TO&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_NONE)||</span><span class="s2">&quot;''&quot;</span><span class="s1">;</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.provideFunction_(</span><span class="s2">&quot;textReplace&quot;</span><span class="s1">,[</span><span class="s2">&quot;function &quot;</span><span class="s1">+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+</span><span class="s2">&quot;(haystack, needle, replacement) {&quot;</span><span class="s1">,</span><span class="s2">'  needle = needle.replace(/([-()</span><span class="s5">\\</span><span class="s2">[</span><span class="s5">\\</span><span class="s2">]{}+?*.$</span><span class="s5">\\</span><span class="s2">^|,:#&lt;!</span><span class="s5">\\\\</span><span class="s2">])/g,&quot;</span><span class="s5">\\\\</span><span class="s2">$1&quot;)'</span><span class="s1">,</span>
<a name="l100"><span class="ln">100  </span></a><span class="s2">'                 .replace(/</span><span class="s5">\\</span><span class="s2">x08/g,&quot;</span><span class="s5">\\\\</span><span class="s2">x08&quot;);'</span><span class="s1">,</span><span class="s2">&quot;  return haystack.replace(new RegExp(needle, 'g'), replacement);&quot;</span><span class="s1">,</span><span class="s2">&quot;}&quot;</span><span class="s1">])+</span><span class="s2">&quot;(&quot;</span><span class="s1">+b+</span><span class="s2">&quot;, &quot;</span><span class="s1">+c+</span><span class="s2">&quot;, &quot;</span><span class="s1">+a+</span><span class="s2">&quot;)&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.text_reverse=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[(Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;TEXT&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER)||</span><span class="s2">&quot;''&quot;</span><span class="s1">)+</span><span class="s2">&quot;.split('').reverse().join('')&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.variables={};Blockly.JavaScript.variables_get=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">return</span><span class="s1">[Blockly.JavaScript.variableDB_.getName(a.getFieldValue(</span><span class="s2">&quot;VAR&quot;</span><span class="s1">),Blockly.Variables.NAME_TYPE),Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.variables_set=</span><span class="s3">function</span><span class="s1">(a){</span><span class="s3">var </span><span class="s1">b=Blockly.JavaScript.valueToCode(a,</span><span class="s2">&quot;VALUE&quot;</span><span class="s1">,Blockly.JavaScript.ORDER_ASSIGNMENT)||</span><span class="s2">&quot;0&quot;</span><span class="s1">;</span><span class="s3">return </span><span class="s1">Blockly.JavaScript.variableDB_.getName(a.getFieldValue(</span><span class="s2">&quot;VAR&quot;</span><span class="s1">),Blockly.Variables.NAME_TYPE)+</span><span class="s2">&quot; = &quot;</span><span class="s1">+b+</span><span class="s2">&quot;;</span><span class="s5">\n</span><span class="s2">&quot;</span><span class="s1">};</span>
<a name="l101"><span class="ln">101  </span></a><span class="s1">Blockly.JavaScript.variablesDynamic={};Blockly.JavaScript.variables_get_dynamic=Blockly.JavaScript.variables_get;Blockly.JavaScript.variables_set_dynamic=Blockly.JavaScript.variables_set;</span></pre>
</body>
</html>